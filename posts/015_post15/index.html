<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jasmine Wang">
<meta name="dcterms.date" content="2025-03-31">
<meta name="description" content="After closely investigating Google’s AI tools, I decided to apply those insights to my own AI ideation application. Here’s a brief overview of my reflection.">

<title>Applying human-centered design to AI Ideation Partner – Jasmine’s explorations of LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-8647a4a42273f773479d27c00df3f9ed.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jasmine’s explorations of LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jaasminew"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Applying human-centered design to AI Ideation Partner</h1>
                  <div>
        <div class="description">
          After closely investigating Google’s AI tools, I decided to apply those insights to my own AI ideation application. Here’s a brief overview of my reflection.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">product development</div>
                <div class="quarto-category">creativity</div>
                <div class="quarto-category">ideation</div>
                <div class="quarto-category">reflections</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jasmine Wang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 31, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="key-takeaways-from-learn-about-textfx-and-notebooklm" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways-from-learn-about-textfx-and-notebooklm">Key takeaways from Learn About, TextFX, and NotebookLM</h2>
<p>The three products produced by Google AI Labs provided me with so many valuable insights. In this post, I’m going to apply those insights into the design and development of my own LLM application.</p>
<p><img src="hero-img.jpg" class="img-fluid"></p>
<section id="a-quick-recap-my-previous-concerns" class="level3">
<h3 class="anchored" data-anchor-id="a-quick-recap-my-previous-concerns">A quick recap: my previous concerns</h3>
<p>From my conversations with friends and classmates, I identified a few key challenges faced by this ideation tool:</p>
<ol type="1">
<li>It’s difficult to pinpoint very clear and specific user scenarios for the tool.</li>
<li>The tool doesn’t always deliver consistent value, as the quality of the output can fluctuate, leading users to lose interest quickly.</li>
<li>Many users struggle to recognize the unique strengths of LLM—-for example, their ability to generate unconventional associations—and thus lack enough motivations to use the tool.</li>
</ol>
<p>At this stage, AIdeator is an LLM-powered application designed to generate mind maps that support human collaboration in developing innovative product ideas. It builds out the mind map by expanding branches using a set of pre-defined brainstorming methods, each with clear, structured steps.</p>
<p>The core structure is promising, but a closer look reveals several unresolved ambiguities. How should I position this product—as a creative booster like TextFX, a practical tool like NotebookLM, or a hybrid of both? Who are the actual users? What specific value are they expecting from the tool? And perhaps most importantly, how should I frame and brand AIdeator so that its purpose and benefits are immediately clear to its target audience?</p>
</section>
<section id="reframe-the-product" class="level3">
<h3 class="anchored" data-anchor-id="reframe-the-product">Reframe the product</h3>
<p>Based on these queries, I constructed 4 main user scenarios:</p>
<ol type="1">
<li>early startup founders use the tool to brainstorm <strong>profitable produce ideas</strong>
<ol type="1">
<li>they have relatively clear ideas about market and target customers (input)</li>
<li>they want profitable, innovative, and feasible product ideas</li>
<li>initial stage of product development</li>
<li>desired output: <strong>a clear and well-organized product description documentation</strong> (better with text &amp; images)</li>
</ol></li>
<li>individual developers use this tool to come up with their <strong>new personal project ideas</strong>
<ol type="1">
<li>they start with a problem statement they want to solve</li>
<li>they are looking for human-centered, creative, and implementable project ideas with suggested feature listing</li>
<li>initial stage of product development</li>
<li>desired output: a clear documentation of product overview, features, (roadmap)</li>
</ol></li>
<li>small to medium size companies use this tool to look for <strong>solutions to solve customers’ pain points</strong>
<ol type="1">
<li>the brainstorming tool only acts as a <strong>reference list</strong> that helps the team expand their thoughts</li>
<li>guide the team (without much experience in design) to run innovation tournament and brainstorm innovative solutions</li>
<li>in the middle of product development stage (usually already with mature products, so more contextual information as input)</li>
<li>desired output: a clear documentation of problem statement and targeted solutions with suggested implementation strategies</li>
</ol></li>
<li>students use this tool to brainstorm their <strong>school/club/personal project</strong> <strong>ideas</strong>
<ol type="1">
<li>they are passionate about tech and are looking for creative and feasible project ideas for school and club assignments</li>
<li>desired output: a clear documentation of project proposal with potential features</li>
</ol></li>
</ol>
<p>After going through the list, I felt that something was slightly off. Then I suddenly noticed a pattern: <strong>not a single real, tangible pain point was addressed in the text</strong>. In other words, these are all things people can already do—-with or without the product. At this stage, the tool feels more like an art piece than a solution that delivers concrete business value.</p>
<p>Do I want to build a purely creative tool? Probably not. That realization led me to shift my focus toward integrating more utility and practicality into the product, ensuring it not only sparks creativity but also solves real problems and delivers meaningful value to its users.</p>
<p>Visualizing the product idea? Targeting a proven market demographic? Verifying product–market fit and business value? Or even just helping users generate a list of inspiring product ideas based on past successes? I had a lot of raw ideas swirling in my mind. At this point, I decided to turn to GPT o1 for some fresh suggestions. (Interestingly, I suddenly realized that I’ve become a potential user of my own product!)</p>
<p>Below, o1 suggested a couple potential directions that I might consider taking. Here’s a sample excerpt.</p>
<p><img src="o1-answer.png" class="img-fluid"></p>
<p>After evaluating the effectiveness and feasibility of these insights, I decided to move forward with a few additional features to strengthen the product’s value:</p>
<ul>
<li><strong>Market feasibility checks</strong>: As the user brainstorms a product idea, the tool pulls in relevant data (market growth rates, competitor analysis, consumer preferences) so they can see real signals on feasibility.</li>
<li><strong>Budgeting and feaibility guidance</strong>: The tool will offer rough estimates of financial and technical requirements, linking the idea to real-world constraints and opportunities to help users assess what’s realistically achievable.</li>
<li><strong>Step-by-Step Implementation Plans</strong>: After an idea is chosen, the tool generates a suggested timeline, key tasks, resource needs, and potential budget ranges.</li>
</ul>
</section>
<section id="embrace-human-centered-design" class="level3">
<h3 class="anchored" data-anchor-id="embrace-human-centered-design">Embrace human-centered design</h3>
<p>After dealing with the overall direction, I started diving into the granular details of design. Google’s AI products use a lot of human-centered design principles and always place humans at the forefront. Here I want to also integrate these principles in my product to make it intuitive and user-friendly.</p>
<section id="guided-freedom-in-brainstorming" class="level4">
<h4 class="anchored" data-anchor-id="guided-freedom-in-brainstorming">1. Guided freedom in brainstorming</h4>
<p>Brainstorming is an activity that values autonomy and a sense of control. Users don’t want to feel driven or dominated by AI—-they want to be the idea owner, the one who ultimately arrives at the most brilliant solution. With that in mind, the interface should make it easy and intuitive for users to provide feedback, with distinct visual hierarchy to reinforce that they can always intervene and steer the direction of the brainstorming process.</p>
<p>Retaining control in the hands of the user can be a delicate balance. It means <strong>controlling the pace and flow of information</strong> while keeping the AI’s presence subtle yet consistently accessible. More specifically, instead of overwhelming users with a large volume of ideas, I aim to limit the number of items to <strong>around seven</strong>—-a number backed by cognitive research as the typical capacity of short-term memory. At the same time, the information density should remain low. Presenting each idea as a keyword or short phrase makes the content feel more digestible and less cognitively demanding, helping users stay focused and in control.</p>
<p>We can take it a step further by using color or transparency coding to differentiate between AI-generated and human-generated ideas—-ensuring that ideas only become finalized or “solid” once they receive human confirmation. This reinforces the concept of AI as a co-creator, not the decision-maker, keeping creative ownership firmly in the hands of the user.</p>
</section>
<section id="creative-touch-and-unexpectedness" class="level4">
<h4 class="anchored" data-anchor-id="creative-touch-and-unexpectedness">2. Creative touch and unexpectedness</h4>
<p>Adding creative touches and elements of surprise is also essential, as the tool is inherently a creative product. On a surface level, <strong>color</strong> is a powerful visual cue for creativity—using color coding for consolidated product ideas or adding vibrant highlights to key user interactions can make the UI feel more playful and dynamic.</p>
<p>Another way to enhance this experience is by allowing users to <strong>adjust the “creativity level” or “wildness”</strong> of the ideas being generated. As we know, different user groups will have different tolerances for novelty versus feasibility. Giving users control over this setting could make the tool feel more adaptable and engaging—almost like a real invention machine that powers and responds to human creativity.</p>
<p>The amount of information revealed at once also plays a key role in shaping the user’s sense of unexpectedness. Instead of delivering too much too quickly, the tool should generate content gradually, focusing on keywords or short phrases rather than full paragraphs. This keeps the experience dynamic and encourages curiosity as ideas unfold step by step.</p>
<p>Finally, introducing elements of <strong>randomness</strong> can spark creative breakthroughs. Randomness often leads to unexpected connections. A “shuffle” feature that mixes or swaps concepts, or a “mysterious expansion” branch that adds an entirely out-of-the-box tangent to the current idea, can inject surprise and keep the ideation process feeling fresh and imaginative.</p>
</section>
<section id="reduce-friction-along-the-way" class="level4">
<h4 class="anchored" data-anchor-id="reduce-friction-along-the-way">3. Reduce friction along the way</h4>
<p>Brainstorming thrives in a frictionless environment, where users’ creativity can flow freely across the space. This means the user experience must be seamless, allowing users to <strong>add, edit, and rearrange ideas at any point without interruption</strong>. To support this, we can enable features like <strong>organic combination, swapping, and replacing of concepts to form new ideas</strong>. In short, the core principle is to make the association between concepts as frictionless as possible.</p>
</section>
<section id="the-possibility-of-incorporating-multi-modal-output" class="level4">
<h4 class="anchored" data-anchor-id="the-possibility-of-incorporating-multi-modal-output">4. The possibility of incorporating multi-modal output</h4>
<p>In my creative process, visual content is key. Often, a single image of a product prototype can instantly reshape my perception of an idea and significantly elevate its potential. Following that line of thought, I’m planning to experiment with the newly launched OpenAI 4o Image Generation feature. In the next post, I’ll be exploring this tool to see whether it has the potential to enhance and strengthen this product.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/jaasminew\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>